{{/*
  huge/styles/private/GetRegisteredStyles
  Retrieves the styles registered through config and apply the necessary logic before returning
  a slice with proper data.

  @author @regisphilibert

  @context Any (.)

  @access private

  @returns Slice of Maps
    String (.name)
    String (.path)
    Slice (.use)?
    Bool (.inline)?

*/}}
{{ $config := partialCached "huge/config/Get" "styles" "styles" }}
{{ $styles := slice }}
{{ with $config.styles }}
  {{ range $style := . }}
    {{ with .path }}
      {{ $name := . }}
      {{ with $style.name }}
        {{ $name = . }}
      {{ end }}
      {{ $transformations := slice }}
      {{ with partialCached "huge/styles/private/GetTransformations" $style $style }}
        {{ $transformations = . }}
      {{ end }}
      {{ $inline := $style.inline | default false }}
      {{ $styles = $styles | append (merge $style (dict
        "name" $name
        "inline" $inline
        "transformations" $transformations
      )) }}
    {{ end }}
  {{ end }}
{{ end }}

{{ return $styles }}